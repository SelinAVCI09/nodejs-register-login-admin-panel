{"ast":null,"code":"import _asyncToGenerator from \"/Users/selinavci/Downloads/LoginAuthenticationApp-NodeJS-AngularJS-main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HomeComponent } from '../home/home.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class LoginComponent {\n  constructor(router) {\n    this.router = router;\n  }\n  registerClick(username, password) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (username.value === '' && password.value === '') {\n        return alert(\"Invalid Credentials\");\n      }\n      yield _this.Login(username, password);\n    })();\n  }\n  Login(username, password) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const response = yield fetch('http://localhost:3001/api/v2/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username.value,\n          password: password.value\n        })\n      });\n      if (!response.ok) {\n        password.value = '';\n        return alert('Invalid Username or Password.');\n      }\n      const result = yield response.json();\n      username.value = '';\n      password.value = '';\n      const getUserInfo = yield fetch(`http://localhost:3001/api/v1/user/${result.result.data[0].id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `${result.token}`\n        }\n      });\n      if (!getUserInfo.ok) {\n        return alert(`Couldn't get user info, Please try again later.`);\n      }\n      const userInfoResult = yield getUserInfo.json();\n      // To access user info -> userInfoResult[0].*\n      const homeComp = new HomeComponent();\n      homeComp.RetrieveInfo(userInfoResult[0]);\n      _this2.router.navigate(['/']);\n    })();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 11,\n  vars: 0,\n  consts: [[1, \"login\"], [\"type\", \"any\", \"placeholder\", \"Username\", \"required\", \"\", 1, \"textarea-as-input\"], [\"username\", \"\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", 1, \"textarea-as-input\"], [\"password\", \"\"], [\"id\", \"loginBTN\", 1, \"myButton\", 3, \"click\"], [\"href\", \"/register\", 1, \"redirect\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r2 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"input\", 1, 2)(5, \"input\", 3, 4);\n      i0.ɵɵelementStart(7, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_7_listener() {\n        i0.ɵɵrestoreView(_r2);\n        const _r0 = i0.ɵɵreference(4);\n        const _r1 = i0.ɵɵreference(6);\n        return i0.ɵɵresetView(ctx.registerClick(_r0, _r1));\n      });\n      i0.ɵɵtext(8, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"a\", 6);\n      i0.ɵɵtext(10, \"Register\");\n      i0.ɵɵelementEnd()();\n    }\n  },\n  styles: [\"@import url(https://fonts.googleapis.com/css2?family=Open+Sans:wght@200;300[_ngcontent-%COMP%];400[_ngcontent-%COMP%];500[_ngcontent-%COMP%];600[_ngcontent-%COMP%];700&display=swap)[_ngcontent-%COMP%];*[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n  font-family: \\\"Open Sans\\\", sans-serif;\\n}\\n\\nbody[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  min-height: 100vh;\\n  width: 100%;\\n  padding: 0 10px;\\n}\\n\\nbody[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  background: url(\\\"https://www.codingnepalweb.com/demos/create-glassmorphism-login-form-html-css/hero-bg.jpg\\\") center/cover, #000;\\n}\\n\\n.wrapper[_ngcontent-%COMP%] {\\n  width: 400px;\\n  border-radius: 8px;\\n  padding: 30px;\\n  text-align: center;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  backdrop-filter: blur(9px);\\n  -webkit-backdrop-filter: blur(9px);\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\nform[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nh2[_ngcontent-%COMP%] {\\n  font-size: 2rem;\\n  margin-bottom: 20px;\\n  color: #fff;\\n}\\n\\n.input-field[_ngcontent-%COMP%] {\\n  position: relative;\\n  border-bottom: 2px solid #ccc;\\n  margin: 15px 0;\\n}\\n\\n.input-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  left: 0;\\n  transform: translateY(-50%);\\n  color: #fff;\\n  font-size: 16px;\\n  pointer-events: none;\\n  transition: 0.15s ease;\\n}\\n\\n.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 40px;\\n  background: transparent;\\n  border: none;\\n  outline: none;\\n  font-size: 16px;\\n  color: #fff;\\n}\\n\\n.input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus    ~ label[_ngcontent-%COMP%], .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid    ~ label[_ngcontent-%COMP%] {\\n  font-size: 0.8rem;\\n  top: 10px;\\n  transform: translateY(-120%);\\n}\\n\\n.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  color: #efefef;\\n  text-decoration: none;\\n}\\n\\n.wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  background: #fff;\\n  color: #000;\\n  font-weight: 600;\\n  border: none;\\n  padding: 12px 20px;\\n  cursor: pointer;\\n  border-radius: 3px;\\n  font-size: 16px;\\n  border: 2px solid transparent;\\n  transition: 0.3s ease;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  color: #fff;\\n  border-color: #fff;\\n  background: rgba(255, 255, 255, 0.15);\\n}\\n\\n.register[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-top: 30px;\\n  color: #fff;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsU0FBUztFQUNULFVBQVU7RUFDVixzQkFBc0I7RUFDdEIsb0NBQW9DO0FBQ3RDOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsaUJBQWlCO0VBQ2pCLFdBQVc7RUFDWCxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsWUFBWTtFQUNaLCtIQUErSDtBQUNqSTs7QUFFQTtFQUNFLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQiwwQ0FBMEM7RUFDMUMsMEJBQTBCO0VBQzFCLGtDQUFrQztFQUNsQyxvQ0FBb0M7QUFDdEM7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsNkJBQTZCO0VBQzdCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLE9BQU87RUFDUCwyQkFBMkI7RUFDM0IsV0FBVztFQUNYLGVBQWU7RUFDZixvQkFBb0I7RUFDcEIsc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWix1QkFBdUI7RUFDdkIsWUFBWTtFQUNaLGFBQWE7RUFDYixlQUFlO0VBQ2YsV0FBVztBQUNiOztBQUVBOztFQUVFLGlCQUFpQjtFQUNqQixTQUFTO0VBQ1QsNEJBQTRCO0FBQzlCOztBQUVBO0VBQ0UsY0FBYztFQUNkLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsNkJBQTZCO0VBQzdCLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixXQUFXO0FBQ2IiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IHVybChcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9T3BlbitTYW5zOndnaHRAMjAwOzMwMDs0MDA7NTAwOzYwMDs3MDAmZGlzcGxheT1zd2FwXCIpO1xuXG4qIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LWZhbWlseTogXCJPcGVuIFNhbnNcIiwgc2Fucy1zZXJpZjtcbn1cblxuYm9keSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgd2lkdGg6IDEwMCU7XG4gIHBhZGRpbmc6IDAgMTBweDtcbn1cblxuYm9keTo6YmVmb3JlIHtcbiAgY29udGVudDogXCJcIjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kOiB1cmwoXCJodHRwczovL3d3dy5jb2RpbmduZXBhbHdlYi5jb20vZGVtb3MvY3JlYXRlLWdsYXNzbW9ycGhpc20tbG9naW4tZm9ybS1odG1sLWNzcy9oZXJvLWJnLmpwZ1wiKSBjZW50ZXIvY292ZXIsICMwMDA7XG59XG5cbi53cmFwcGVyIHtcbiAgd2lkdGg6IDQwMHB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIHBhZGRpbmc6IDMwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpO1xuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoOXB4KTtcbiAgLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXI6IGJsdXIoOXB4KTtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpO1xufVxuXG5mb3JtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuaDIge1xuICBmb250LXNpemU6IDJyZW07XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG4uaW5wdXQtZmllbGQge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjY2NjO1xuICBtYXJnaW46IDE1cHggMDtcbn1cblxuLmlucHV0LWZpZWxkIGxhYmVsIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgbGVmdDogMDtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuICBjb2xvcjogI2ZmZjtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgdHJhbnNpdGlvbjogMC4xNXMgZWFzZTtcbn1cblxuLmlucHV0LWZpZWxkIGlucHV0IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNDBweDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgb3V0bGluZTogbm9uZTtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBjb2xvcjogI2ZmZjtcbn1cblxuLmlucHV0LWZpZWxkIGlucHV0OmZvY3VzIH4gbGFiZWwsXG4uaW5wdXQtZmllbGQgaW5wdXQ6dmFsaWQgfiBsYWJlbCB7XG4gIGZvbnQtc2l6ZTogMC44cmVtO1xuICB0b3A6IDEwcHg7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTIwJSk7XG59XG5cbi53cmFwcGVyIGEge1xuICBjb2xvcjogI2VmZWZlZjtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuXG4ud3JhcHBlciBhOmhvdmVyIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG59XG5cbmJ1dHRvbiB7XG4gIGJhY2tncm91bmQ6ICNmZmY7XG4gIGNvbG9yOiAjMDAwO1xuICBmb250LXdlaWdodDogNjAwO1xuICBib3JkZXI6IG5vbmU7XG4gIHBhZGRpbmc6IDEycHggMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7XG4gIHRyYW5zaXRpb246IDAuM3MgZWFzZTtcbn1cblxuYnV0dG9uOmhvdmVyIHtcbiAgY29sb3I6ICNmZmY7XG4gIGJvcmRlci1jb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KTtcbn1cblxuLnJlZ2lzdGVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tdG9wOiAzMHB4O1xuICBjb2xvcjogI2ZmZjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";AAEA,SAASA,aAAa,QAAQ,wBAAwB;;;AAUtD,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,MAAc;IAAd,WAAM,GAANA,MAAM;EAAY;EAEhCC,aAAa,CAACC,QAA0B,EAAEC,QAA0B;IAAA;IAAA;MAExE,IAAID,QAAQ,CAACE,KAAK,KAAK,EAAE,IAAID,QAAQ,CAACC,KAAK,KAAK,EAAE,EAAE;QAClD,OAAOC,KAAK,CAAC,qBAAqB,CAAC;;MAGrC,MAAM,KAAI,CAACC,KAAK,CAACJ,QAAQ,EAAEC,QAAQ,CAAC;IAAC;EACvC;EAEMG,KAAK,CAACJ,QAA0B,EAAEC,QAA0B;IAAA;IAAA;MAChE,MAAMI,QAAQ,SAASC,KAAK,CAAC,oCAAoC,EAAE;QACjEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;SACjB;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBX,QAAQ,EAAEA,QAAQ,CAACE,KAAK;UACxBD,QAAQ,EAAEA,QAAQ,CAACC;SACpB;OACF,CAAC;MAEF,IAAG,CAACG,QAAQ,CAACO,EAAE,EAAC;QACdX,QAAQ,CAACC,KAAK,GAAG,EAAE;QACnB,OAAOC,KAAK,CAAC,+BAA+B,CAAC;;MAG/C,MAAMU,MAAM,SAAUR,QAAQ,CAACS,IAAI,EAAe;MAElDd,QAAQ,CAACE,KAAK,GAAG,EAAE;MACnBD,QAAQ,CAACC,KAAK,GAAG,EAAE;MAEnB,MAAMa,WAAW,SAAST,KAAK,CAAC,qCAAqCO,MAAM,CAACA,MAAM,CAACG,IAAI,CAAC,CAAC,CAAC,CAACC,EAAE,EAAE,EAAE;QAC/FV,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,GAAGK,MAAM,CAACK,KAAK;;OAEnC,CAAC;MAEF,IAAG,CAACH,WAAW,CAACH,EAAE,EAAC;QACjB,OAAOT,KAAK,CAAC,iDAAiD,CAAC;;MAGjE,MAAMgB,cAAc,SAAUJ,WAAW,CAACD,IAAI,EAAiB;MAE/D;MAEA,MAAMM,QAAQ,GAAG,IAAIzB,aAAa,EAAE;MACpCyB,QAAQ,CAACC,YAAY,CAACF,cAAc,CAAC,CAAC,CAAC,CAAC;MAExC,MAAI,CAACrB,MAAM,CAACwB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;IAAC;EAC9B;;AAvDW1B,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAA2B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;MCZ3BC,8BAAmB;MACXA,qBAAK;MAAAA,iBAAK;MACdA,8BAAsF;MAEtFA,iCAAmF;MAA5CA;QAAAA;QAAA;QAAA;QAAA,OAASA,0CAAiC;MAAA,EAAC;MAACA,qBAAK;MAAAA,iBAAS;MACjGA,4BAAqC;MAAAA,yBAAQ;MAAAA,iBAAI","names":["HomeComponent","LoginComponent","constructor","router","registerClick","username","password","value","alert","Login","response","fetch","method","headers","body","JSON","stringify","ok","result","json","getUserInfo","data","id","token","userInfoResult","homeComp","RetrieveInfo","navigate","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/Users/selinavci/Downloads/LoginAuthenticationApp-NodeJS-AngularJS-main/frontend/src/app/components/login/login.component.ts","/Users/selinavci/Downloads/LoginAuthenticationApp-NodeJS-AngularJS-main/frontend/src/app/components/login/login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HomeComponent } from '../home/home.component';\nimport { Response, UserInfo } from '../ResponseTemplate';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\n\nexport class LoginComponent {\n\n  constructor(private router: Router) { }\n\n  async registerClick(username: HTMLInputElement, password: HTMLInputElement) {\n\n    if (username.value === '' && password.value === '') {\n      return alert(\"Invalid Credentials\")\n    }\n\n    await this.Login(username, password);\n  }\n\n  async Login(username: HTMLInputElement, password: HTMLInputElement) {\n    const response = await fetch('http://localhost:3001/api/v2/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: username.value,\n        password: password.value,\n      })\n    })\n    \n    if(!response.ok){\n      password.value = ''\n      return alert('Invalid Username or Password.')\n    }\n\n    const result = (await response.json()) as Response;\n\n    username.value = ''\n    password.value = ''\n\n    const getUserInfo = await fetch(`http://localhost:3001/api/v1/user/${result.result.data[0].id}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `${result.token}`\n      }\n    })\n\n    if(!getUserInfo.ok){\n      return alert(`Couldn't get user info, Please try again later.`)\n    }\n\n    const userInfoResult = (await getUserInfo.json()) as UserInfo[];\n\n    // To access user info -> userInfoResult[0].*\n    \n    const homeComp = new HomeComponent()\n    homeComp.RetrieveInfo(userInfoResult[0])\n\n    this.router.navigate(['/']);\n  }\n}\n","<div class=\"login\">\n    <h1>Login</h1>\n    <input type=\"any\" class=\"textarea-as-input\" #username placeholder=\"Username\" required>\n    <input type=\"password\" class=\"textarea-as-input\" #password placeholder=\"Password\" required>\n    <button id=\"loginBTN\" class=\"myButton\" (click)=\"registerClick(username, password)\">Login</button>\n    <a href=\"/register\" class=\"redirect\">Register</a>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}